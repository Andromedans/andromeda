(* Test whether beta hints are dynamic. *)

constant A : Type
constant a : A
constant b : A

let f = fun x => whnf x

check f a

check
  with equality_in betas hints handle
  assume eq : a == b in
  let _ = beta eq in
    f a


operation gimme_beta 0

check with equality_in betas hints handle
   handle
     let _ = gimme_beta in
     whnf a
   with
     | gimme_beta =>
       assume eq : a == b in
       let _ = beta eq in yield ()
   end

