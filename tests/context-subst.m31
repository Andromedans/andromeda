(* First a nice simple substitution. *)

Parameter A : Type.

Let x := assume x : A in x.

Let P := assume P : A -> Type in P.

Let y := assume y : P x in y.

Check y where P := (lambda [z : A] A).

(* Substitute an atom with something that depends on it? Seems to work. *)

Parameter f : A -> A.

Check (y where x := f x).

(* Substitute with different values in separate subterms, then join. *)

Parameter a : A.
Parameter b : A.

Parameter ign : forall [T : Type] T -> A.
Parameter g : A -> A -> A.

Let igny := ign (P x) y.

Check g (igny where x := a) (igny where x := b).
